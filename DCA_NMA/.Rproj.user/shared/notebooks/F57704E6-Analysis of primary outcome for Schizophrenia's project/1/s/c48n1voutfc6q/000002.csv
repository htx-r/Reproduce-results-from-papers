"0","modelNMABinary<-function()"
"0","{"
"0","  for (i in 1:ns) {"
"0","    w[i, 1] <- 0"
"0","    theta[i, t[i, 1]] <- 0"
"0","    for (k in 1:na[i]) {"
"0","      r[i, t[i, k]] ~ dbin(p[i, t[i, k]], n[i, t[i, k]])"
"0","    }"
"0","    logit(p[i, t[i, 1]]) <- u[i]"
"0","    for (k in 2:na[i]) {"
"0","      logit(p[i, t[i, k]]) <- u[i] + theta[i, t[i, k]]"
"0","      theta[i, t[i, k]] ~ dnorm(md[i, t[i, k]], precd[i, "
"0","                                                      t[i, k]])"
"0","      md[i, t[i, k]] <- mean[i, k] + sw[i, k]"
"0","      w[i, k] <- (theta[i, t[i, k]] - mean[i, k])"
"0","      sw[i, k] <- sum(w[i, 1:(k - 1)])/(k - 1)"
"0","      precd[i, t[i, k]] <- prec * 2 * (k - 1)/k"
"0","      mean[i, k] <- d[t[i, k]] - d[t[i, 1]]"
"0","    }"
"0","  }"
"0","  for (i in 1:ns) {"
"0","    u[i] ~ dnorm(0, 0.01)"
"0","  }"
"0","  tau ~ dnorm(0, 1) %_% T(0, )"
"0","  prec <- 1/pow(tau, 2)"
"0","  tau.sq <- pow(tau, 2)"
"0","  d[ref] <- 0"
"0","  for (k in 1:(ref - 1)) {"
"0","    d[k] ~ dnorm(0, 0.01)"
"0","  }"
"0","  for (k in (ref + 1):nt) {"
"0","    d[k] ~ dnorm(0, 0.01)"
"0","  }"
"0","  for (i in 1:nt) {"
"0","    for (j in 1:nt) {"
"0","      OR[i, j] <- exp(d[j] - d[i])"
"0","    }"
"0","  }"
"0","  for (j in 1:(ref - 1)) {"
"0","    ORref[j] <- exp(d[j] - d[ref])"
"0","    LORref[j] <- d[j] - d[ref]"
"0","  }"
"0","  for (j in (ref + 1):nt) {"
"0","    ORref[j] <- exp(d[j] - d[ref])"
"0","    LORref[j] <- d[j] - d[ref]"
"0","  }"
"0","}"
"0",""
