##########################################################
############### LIBRARIES #################################
### Load needed libraries
library(readxl)
library(dplyr)
library(rms)
library(lme4)
library(R2jags)
library(mitml)
library(jomo)
library(xlsx)
library(ggpubr)
library(gridExtra)
library(devtools)
library(pROC)
library(vcd)
library(plyr)
library(pmsampsize)
library(shiny)
library(shinythemes)
library(devtools)
install_git("https://github.com/BavoDC/CalibrationCurves")
library(CalibrationCurves)
load("C:/Users/kc19o338/Desktop/Real world predictions project/Real world predictions project.RData")
load("C:/Users/kc19o338/Desktop/Real world predictions project/TwoStageDataSMSC.RData")
#results
print(SMSCjagsResults)
#pooled estimates
Pooled
#table of all Bayesian results from each one of the imputed datasets
tablewithresults
#pooled estimates
Pooled
load("C:/Users/kc19o338/Desktop/Real world predictions project/MISMSC.RData")
Pooled
load("C:/Users/kc19o338/Desktop/Real world predictions project/3-stage-model_until2ndstage.RData")
Pooled
EPV
########################  Calculation of the EPV and the required sample size based on Riley et al   ############
source("EPVandSampleSizePrModel.R")
RiskDistribution
app_cstat_model
mod_log_2
confint(mod_log_2)
########################  Calculation of the EPV and the required sample size based on Riley et al   ############
source("EPVandSampleSizePrModel.R")
##########################################################
############### LIBRARIES #################################
### Load needed libraries
library(readxl)
library(dplyr)
library(rms)
library(lme4)
library(R2jags)
library(mitml)
library(jomo)
library(xlsx)
library(ggpubr)
library(gridExtra)
library(devtools)
library(pROC)
library(vcd)
library(plyr)
library(pmsampsize)
library(shiny)
library(shinythemes)
library(devtools)
install_git("https://github.com/BavoDC/CalibrationCurves")
library(CalibrationCurves)
########################  Calculation of the EPV and the required sample size based on Riley et al   ############
source("EPVandSampleSizePrModel.R")
SMSCdata
lrm(outcome~1,x=TRUE,y=TRUE,data=SMSCdata)
df<-22
events<-nrow(SMSCdata[which(SMSCdata$outcome==1),])
EPV<-events/df
#### sample size by Riley et al
#null model
mod0 <- lrm(outcome~1,x=TRUE,y=TRUE,data=SMSCdata)
print(sample_size$results_table)
EPV
#pooled estimates
Pooled
Pooled[2,]
##Table 2 of paper
Pooled<-as.data.frame(Pooled)
##Table 2 of paper
Pooled$estimates
##Table 2 of paper
Pooled$estimates[1,]
##Table 2 of paper
Pooled$estimates[,1]
##Table 2 of paper
round(Pooled$estimates[,1],2)
##Table 2 of paper
round(Pooled$estimates[,1],3)
##Table 2 of paper
round(Pooled$estimates[2:11,1],3)
##Table 2 of paper
x<-round(Pooled$estimates[2:11,1],3)
exp(x)
round(exp(Pooled$estimates[2:11,1]),3)
round(exp(Pooled$estimates[2:11,1]),2)
Pooled
Pooled$estimates[2:11,1]-1.96*
Pooled$call
Pooled$estimates[2:11,1]-1.96*
Pooled$call
Pooled$call
Pooled$extra.pars
Pooled$m
Pooled$adj.df
Pooled$df.com
Pooled$cls.method
Pooled$estimates
Pooled$estimates[,2]
exp(Pooled$estimates[2:11,1]-1.96*Pooled$estimates[2:11,2])
round(exp(Pooled$estimates[2:11,1]-1.96*Pooled$estimates[2:11,2]),2)
cbind(round(Pooled$estimates[2:11,1],3),
round(exp(Pooled$estimates[2:11,1]),2),
paste("(",round(exp(Pooled$estimates[2:11,1]-1.96*Pooled$estimates[2:11,2]),2),",",round(exp(Pooled$estimates[2:11,1]+1.96*Pooled$estimates[2:11,2]),2),")")
)
colnames(Table2)<-c("β(k)", "OR", "95% Cr. I.")
Table2<-cbind(round(Pooled$estimates[2:11,1],3),
round(exp(Pooled$estimates[2:11,1]),2),
paste("(",round(exp(Pooled$estimates[2:11,1]-1.96*Pooled$estimates[2:11,2]),2),",",round(exp(Pooled$estimates[2:11,1]+1.96*Pooled$estimates[2:11,2]),2),")")
)
colnames(Table2)<-c("β(k)", "OR", "95% Cr. I.")
Table2
